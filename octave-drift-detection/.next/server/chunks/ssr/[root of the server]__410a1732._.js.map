{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 85, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/fe/octave-drift-detection/src/app/mode2/DriftWarningChart.tsx"],"sourcesContent":["'use client';\nimport React, { useEffect, useRef } from 'react';\nimport { Chart, registerables } from 'chart.js';\nChart.register(...registerables);\n\ninterface PlotDataPoint {\n  x: number;\n  y: number;\n  exceedsThreshold: boolean;\n}\n\ninterface DriftWarningChartProps {\n  plotData: PlotDataPoint[];\n}\n\nexport default function DriftWarningChart({ plotData }: DriftWarningChartProps): React.ReactElement {\n  const chartRef = useRef<Chart | null>(null);\n  const canvasRef = useRef<HTMLCanvasElement | null>(null);\n\n  useEffect(() => {\n    console.log('DriftWarningChart plotData length:', plotData.length);\n    if (!canvasRef.current) return;\n    const ctx = canvasRef.current.getContext('2d');\n    if (!ctx) return;\n\n    if (chartRef.current) {\n      chartRef.current.destroy();\n    }\n\n    chartRef.current = new Chart(ctx, {\n      type: 'scatter',\n      data: {\n        datasets: [\n          {\n            label: 'Drift State',\n            data: plotData.map((item) => ({ x: item.x, y: item.y })),\n            borderColor: 'rgb(75, 192, 192)',\n            backgroundColor: 'rgba(75, 192, 192, 0.8)',\n            pointBackgroundColor: plotData.map((item) => {\n              if (item.y === 0) return 'rgba(54, 162, 235, 0.8)'; // normal - blue\n              if (item.y === 1) return 'rgba(255, 206, 86, 0.8)'; // warning - yellow\n              if (item.y === 2) return 'rgba(255, 99, 132, 0.8)'; // drift - red\n              return 'rgba(201, 203, 207, 0.8)'; // default grey\n            }),\n            borderWidth: 2,\n            showLine: true,\n            tension: 0.1,\n            fill: false,\n            stepped: false,\n            pointRadius: 5,\n            pointHoverRadius: 7,\n          },\n        ],\n      },\n      options: {\n        responsive: true,\n        maintainAspectRatio: false,\n        plugins: {\n          legend: {\n            labels: {\n              color: '#e5e7eb',\n            },\n          },\n          tooltip: {\n            mode: 'nearest',\n            intersect: true,\n            callbacks: {\n              label: function(context) {\n                const y = context.parsed.y;\n                if (y === 0) return 'Normal';\n                if (y === 1) return 'Warning';\n                if (y === 2) return 'Drift';\n                return 'Unknown';\n              }\n            }\n          },\n        },\n        scales: {\n          x: {\n            type: 'linear',\n            title: {\n              display: true,\n              text: 'Index',\n              color: '#93c5fd',\n              font: {\n                weight: 'bold',\n              },\n            },\n            grid: {\n              color: 'rgba(255, 255, 255, 0.1)',\n            },\n            ticks: {\n              color: '#e5e7eb',\n              font: {\n                size: 12,\n              },\n            },\n          },\n          y: {\n            title: {\n              display: true,\n              text: 'Drift State',\n              color: '#93c5fd',\n              font: {\n                weight: 'bold',\n              },\n            },\n            beginAtZero: true,\n            ticks: {\n              stepSize: 1,\n              callback: function (this: any, tickValue: string | number) {\n                const value = typeof tickValue === 'string' ? parseInt(tickValue) : tickValue;\n                if (value === 0) return 'Normal';\n                if (value === 1) return 'Warning';\n                if (value === 2) return 'Drift';\n                return '';\n              },\n              color: '#e5e7eb',\n              font: {\n                size: 12,\n              },\n            },\n            grid: {\n              color: 'rgba(255, 255, 255, 0.1)',\n            },\n            min: 0,\n            max: 2,\n          },\n        },\n        animation: {\n          duration: 1000,\n          easing: 'easeInOutQuad',\n        },\n        elements: {\n          point: {\n            radius: 5,\n            hoverRadius: 7,\n          },\n        },\n      },\n    });\n\n    return () => {\n      if (chartRef.current) {\n        chartRef.current.destroy();\n        chartRef.current = null;\n      }\n    };\n  }, [plotData]);\n\n  return <canvas ref={canvasRef} style={{ width: '100%', height: '416px' }} />;\n}\n"],"names":[],"mappings":";;;;AACA;AACA;AAAA;AAFA;;;;AAGA,6JAAA,CAAA,QAAK,CAAC,QAAQ,IAAI,6JAAA,CAAA,gBAAa;AAYhB,SAAS,kBAAkB,EAAE,QAAQ,EAA0B;IAC5E,MAAM,WAAW,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAgB;IACtC,MAAM,YAAY,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAA4B;IAEnD,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,QAAQ,GAAG,CAAC,sCAAsC,SAAS,MAAM;QACjE,IAAI,CAAC,UAAU,OAAO,EAAE;QACxB,MAAM,MAAM,UAAU,OAAO,CAAC,UAAU,CAAC;QACzC,IAAI,CAAC,KAAK;QAEV,IAAI,SAAS,OAAO,EAAE;YACpB,SAAS,OAAO,CAAC,OAAO;QAC1B;QAEA,SAAS,OAAO,GAAG,IAAI,6JAAA,CAAA,QAAK,CAAC,KAAK;YAChC,MAAM;YACN,MAAM;gBACJ,UAAU;oBACR;wBACE,OAAO;wBACP,MAAM,SAAS,GAAG,CAAC,CAAC,OAAS,CAAC;gCAAE,GAAG,KAAK,CAAC;gCAAE,GAAG,KAAK,CAAC;4BAAC,CAAC;wBACtD,aAAa;wBACb,iBAAiB;wBACjB,sBAAsB,SAAS,GAAG,CAAC,CAAC;4BAClC,IAAI,KAAK,CAAC,KAAK,GAAG,OAAO,2BAA2B,gBAAgB;4BACpE,IAAI,KAAK,CAAC,KAAK,GAAG,OAAO,2BAA2B,mBAAmB;4BACvE,IAAI,KAAK,CAAC,KAAK,GAAG,OAAO,2BAA2B,cAAc;4BAClE,OAAO,4BAA4B,eAAe;wBACpD;wBACA,aAAa;wBACb,UAAU;wBACV,SAAS;wBACT,MAAM;wBACN,SAAS;wBACT,aAAa;wBACb,kBAAkB;oBACpB;iBACD;YACH;YACA,SAAS;gBACP,YAAY;gBACZ,qBAAqB;gBACrB,SAAS;oBACP,QAAQ;wBACN,QAAQ;4BACN,OAAO;wBACT;oBACF;oBACA,SAAS;wBACP,MAAM;wBACN,WAAW;wBACX,WAAW;4BACT,OAAO,SAAS,OAAO;gCACrB,MAAM,IAAI,QAAQ,MAAM,CAAC,CAAC;gCAC1B,IAAI,MAAM,GAAG,OAAO;gCACpB,IAAI,MAAM,GAAG,OAAO;gCACpB,IAAI,MAAM,GAAG,OAAO;gCACpB,OAAO;4BACT;wBACF;oBACF;gBACF;gBACA,QAAQ;oBACN,GAAG;wBACD,MAAM;wBACN,OAAO;4BACL,SAAS;4BACT,MAAM;4BACN,OAAO;4BACP,MAAM;gCACJ,QAAQ;4BACV;wBACF;wBACA,MAAM;4BACJ,OAAO;wBACT;wBACA,OAAO;4BACL,OAAO;4BACP,MAAM;gCACJ,MAAM;4BACR;wBACF;oBACF;oBACA,GAAG;wBACD,OAAO;4BACL,SAAS;4BACT,MAAM;4BACN,OAAO;4BACP,MAAM;gCACJ,QAAQ;4BACV;wBACF;wBACA,aAAa;wBACb,OAAO;4BACL,UAAU;4BACV,UAAU,SAAqB,SAA0B;gCACvD,MAAM,QAAQ,OAAO,cAAc,WAAW,SAAS,aAAa;gCACpE,IAAI,UAAU,GAAG,OAAO;gCACxB,IAAI,UAAU,GAAG,OAAO;gCACxB,IAAI,UAAU,GAAG,OAAO;gCACxB,OAAO;4BACT;4BACA,OAAO;4BACP,MAAM;gCACJ,MAAM;4BACR;wBACF;wBACA,MAAM;4BACJ,OAAO;wBACT;wBACA,KAAK;wBACL,KAAK;oBACP;gBACF;gBACA,WAAW;oBACT,UAAU;oBACV,QAAQ;gBACV;gBACA,UAAU;oBACR,OAAO;wBACL,QAAQ;wBACR,aAAa;oBACf;gBACF;YACF;QACF;QAEA,OAAO;YACL,IAAI,SAAS,OAAO,EAAE;gBACpB,SAAS,OAAO,CAAC,OAAO;gBACxB,SAAS,OAAO,GAAG;YACrB;QACF;IACF,GAAG;QAAC;KAAS;IAEb,qBAAO,8OAAC;QAAO,KAAK;QAAW,OAAO;YAAE,OAAO;YAAQ,QAAQ;QAAQ;;;;;;AACzE","debugId":null}},
    {"offset": {"line": 250, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/fe/octave-drift-detection/src/services/backendService1.ts"],"sourcesContent":["// services/backendService1.ts\n\nexport interface KPI {\n  rowKey: string\n  value: string\n  status?: string\n}\n\nexport interface PlotDataPoint {\n  x: number\n  y: number\n  value?: number\n  exceedsThreshold: boolean\n}\n\nexport interface TableDataPoint {\n  id: string\n  timePeriod: string\n  meanPrediction?: number\n  error?: number\n  percentageError?: number\n  status: string\n  abs_curr_per?: number\n  abs_ref_per?: number\n  difference?: number\n}\n\nexport interface OutletsExceedingThreshold {\n  id: number\n  y_true: number\n  y_pred: number\n  percentage_error: number\n}\n\nexport interface Indices {\n  normal: number[]\n  warning: number[]\n  drift: number[]\n}\n\nexport interface AllOutlets {\n  id: number\n  y_true: number\n  y_pred: number\n  percentage_error: number\n}\n\n// **NEW**: the top-10 misclassified IDs\nexport interface Top10Id {\n  id: string\n  time_period: string\n  Mean_Prediction_Error: number\n}\n\nexport async function fetchData(\n  { runtime }: { runtime: string } = { runtime: \"\" }\n): Promise<{\n  kpis: KPI[]\n  errors: { plotData: PlotDataPoint[]; tableData: TableDataPoint[] }\n  top10Ids: Top10Id[]\n  outletsExceedingThreshold: OutletsExceedingThreshold[]\n  indices: Indices\n  state: string\n  coverage: any\n  clusters: any\n  backwardAnalysis: any\n  currentPeriod: string\n  referencePeriod: string\n  totalOutlets: number\n  outletsExceedingThresholdCount: number\n  xaiExplanation: string\n  error_percentage_threshold: number\n  dashboardData: any\n  all_outlets: AllOutlets[]\n  sorted_periods: string[]\n  driftDetected: boolean\n}> {\n  // 1) Fetch the main data\n  const res = await fetch(\n    `/api/mode2/data${runtime ? `?runtime=${runtime}` : \"\"}`,\n    { credentials: \"include\" }\n  )\n  if (!res.ok) throw new Error(`HTTP error! Status: ${res.status}`)\n  const raw: any = await res.json()\n\n  // 2) Fetch the dashboard metadata\n  const dashRes = await fetch(`/dashboard.json`)\n  if (!dashRes.ok) {\n    throw new Error(`HTTP error fetching dashboard.json! Status: ${dashRes.status}`)\n  }\n  const dashboardData = await dashRes.json()\n\n  // 3) Drift detected flag comes from raw.state\n  const driftDetected = raw.state?.toLowerCase() === \"drift\"\n\n  // 4) Period sorting & reference period\n  const sorted_periods: string[] = raw.sorted_periods || []\n  const referencePeriod =\n    sorted_periods.length > 0\n      ? sorted_periods[0]\n      : raw.current_period || \"N/A\"\n\n  // 5) Build KPIs directly from your JSON\n  const kpis: KPI[] = [\n    {\n      rowKey: \"Drift Detected\",\n      value: driftDetected ? \"Yes\" : \"No\",\n      status: driftDetected ? \"Alert\" : \"Normal\",\n    },\n    {\n      rowKey: \"Error Percentage Threshold\",\n      value: raw.error_percentage_threshold?.toString() || \"N/A\",\n      status: \"Normal\",\n    },\n    {\n      rowKey: \"Average Percentage Error (All)\",\n      value:\n        raw.average_percentage_error_all != null\n          ? raw.average_percentage_error_all.toFixed(2)\n          : \"N/A\",\n      status: \"Normal\",\n    },\n    {\n      rowKey: \"Average Percentage Error (Exceeding)\",\n      value:\n        raw.average_percentage_error_exceeding != null\n          ? raw.average_percentage_error_exceeding.toFixed(2)\n          : \"N/A\",\n      status: \"Alert\",\n    },\n    {\n      rowKey: \"Current Period\",\n      value: raw.current_period || \"N/A\",\n      status: \"Normal\",\n    },\n    {\n      rowKey: \"Total Outlets\",\n      value:\n        raw.total_outlets != null ? raw.total_outlets.toString() : \"N/A\",\n      status: \"Normal\",\n    },\n    {\n      rowKey: \"Outlets Exceeding Threshold\",\n      value:\n        raw.outlets_exceeding_threshold_count != null\n          ? raw.outlets_exceeding_threshold_count.toString()\n          : \"N/A\",\n      status:\n        raw.outlets_exceeding_threshold_count > 0 ? \"Alert\" : \"Normal\",\n    },\n    {\n      rowKey: \"State\",\n      value: raw.state || \"N/A\",\n      status: driftDetected ? \"Alert\" : \"Normal\",\n    },\n  ]\n\n  // 6) Map all outlets\n  const all_outlets: AllOutlets[] = (raw.all_outlets || []).map(\n    (item: any) => ({\n      id: item.id,\n      y_true: item.y_true,\n      y_pred: item.y_pred,\n      percentage_error: item.percentage_error,\n    })\n  )\n\n  // 7) Map outlets exceeding the threshold\n  const outletsExceedingThreshold: OutletsExceedingThreshold[] = (\n    raw.outlets_exceeding_threshold || []\n  ).map((item: any) => ({\n    id: item.id,\n    y_true: item.y_true,\n    y_pred: item.y_pred,\n    percentage_error: item.percentage_error,\n  }))\n\n  // 8) Errors – plotData & tableData from id_error\n  const idError = raw.id_error || []\n  const errors = {\n    plotData: idError.map(\n      (item: any, idx: number): PlotDataPoint => ({\n        x: idx,\n        y: item.Mean_Prediction_Error,\n        value: item.Mean_Prediction_Error,\n        exceedsThreshold:\n          Math.abs(item.Mean_Prediction_Error) >\n          (raw.error_percentage_threshold || 0),\n      })\n    ),\n    tableData: idError.map((item: any): TableDataPoint => {\n      const absCurr = item.abs_curr_per || 0\n      const absRef = item.abs_ref_per || 0\n      const diff = absCurr - absRef\n      return {\n        id: item.id.toString(),\n        timePeriod: item.time_period,\n        meanPrediction: item.Mean_Prediction_Error,\n        error: item.Mean_Prediction_Error,\n        percentageError: Math.abs(item.Mean_Prediction_Error),\n        abs_curr_per: absCurr,\n        abs_ref_per: absRef,\n        difference: diff,\n        status:\n          Math.abs(item.Mean_Prediction_Error) >\n          (raw.error_percentage_threshold || 0)\n            ? \"Alert\"\n            : \"Normal\",\n      }\n    }),\n  }\n\n  // 9) Top-10 IDs from the payload\n  const top10Ids: Top10Id[] = (raw.top_10_ids || []).map((item: any) => ({\n    id: item.id.toString(),\n    time_period: item.time_period,\n    Mean_Prediction_Error: item.Mean_Prediction_Error,\n  }))\n\n  // 10) Indices\n  const indices: Indices = {\n    normal: raw.indices?.normal || [],\n    warning: raw.indices?.warning || [],\n    drift: raw.indices?.drift || [],\n  }\n\n  // 11) Clusters, coverage and backward analysis\n  const clusters = raw.clusters || {}\n  const coverage = raw.coverage || {}\n  const backwardAnalysis = raw.backward_analysis || {}\n\n  // 12) Final return\n  return {\n    kpis,\n    errors,\n    top10Ids,\n    outletsExceedingThreshold,\n    indices,\n    state: raw.state || \"Unknown\",\n    coverage,\n    clusters,\n    backwardAnalysis,\n    currentPeriod: raw.current_period || \"N/A\",\n    referencePeriod,\n    totalOutlets: raw.total_outlets || 0,\n    outletsExceedingThresholdCount:\n      raw.outlets_exceeding_threshold_count || 0,\n    xaiExplanation: raw.xai?.explanation || \"\",\n    error_percentage_threshold:\n      raw.error_percentage_threshold || 0,\n    dashboardData,\n    all_outlets,\n    sorted_periods,\n    driftDetected,\n  }\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 402, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/fe/octave-drift-detection/src/services/dashboardService.ts"],"sourcesContent":["/**\n * Shared typings\n * -------------------------------------------------------------------------- */\nexport interface Entry {\n  user: string\n  Runtime: string\n  BusinessUnit: string\n  useCase: string\n  ShortCode: string\n  JSONLink: string\n  alertKeeper: string\n}\n\nexport interface EntriesTableFilter {\n  user?: string\n  Runtime?: string\n  BusinessUnit?: string\n  useCase?: string\n  ShortCode?: string\n  JSONLink?: string\n  alertKeeper?: string          // single name – e.g. \"Kalpa\"\n}\n\n/**\n * Utility helpers\n * -------------------------------------------------------------------------- */\nconst eq = (a?: string, b?: string) =>\n  a !== undefined && b !== undefined ? a.toLowerCase() === b.toLowerCase() : true\n\n/**\n * Fetch the entries table from the API and **return only the rows that match\n * the supplied `filters` object**.  \n *\n * The API is *supposed* to filter server‑side, but we’ve seen it sometimes\n * return the full table (all business units, use‑cases, etc.).  To guarantee\n * correctness we:\n *\n *  1. Pass the query‑string parameters that mirror `filters`.\n *  2. Apply the same filters again in the client, so the caller *always* gets\n *     the precise subset it asked for, even if the backend forgets.\n */\nexport async function fetchEntriesTable(\n  filters: EntriesTableFilter = {},\n): Promise<Entry[]> {\n  /* ------------------------------------------------------------------ */\n  /* 1️⃣  Build the query string we’ll send to the server                */\n  /* ------------------------------------------------------------------ */\n  const params = new URLSearchParams()\n  if (filters.user)         params.append('user',         filters.user)\n  if (filters.Runtime)      params.append('Runtime',      filters.Runtime)\n  if (filters.BusinessUnit) params.append('BusinessUnit', filters.BusinessUnit)\n  if (filters.useCase)      params.append('useCase',      filters.useCase)\n  if (filters.ShortCode)    params.append('ShortCode',    filters.ShortCode)\n  if (filters.JSONLink)     params.append('JSONLink',     filters.JSONLink)\n  if (filters.alertKeeper)  params.append('alertKeeper',  filters.alertKeeper)\n\n  /* ------------------------------------------------------------------ */\n  /* 2️⃣  Fetch from the API                                             */\n  /* ------------------------------------------------------------------ */\n  const res = await fetch(`/api/entries-table?${params.toString()}`, {\n    credentials: 'include',\n  })\n\n  if (!res.ok) {\n    throw new Error(`Failed to fetch entries table: ${res.status} ${res.statusText}`)\n  }\n\n  const allRows: Entry[] = await res.json()\n\n  /* ------------------------------------------------------------------ */\n  /* 3️⃣  Apply the same filters client‑side (safety‑net)                */\n  /* ------------------------------------------------------------------ */\n  const rows = allRows.filter((e) => {\n    if (filters.user         && !eq(e.user,          filters.user        )) return false\n    if (filters.Runtime      &&  e.Runtime         !== filters.Runtime     ) return false\n    if (filters.BusinessUnit && !eq(e.BusinessUnit, filters.BusinessUnit)) return false\n    if (filters.useCase      && !eq(e.useCase,      filters.useCase     )) return false\n    if (filters.ShortCode    &&  e.ShortCode       !== filters.ShortCode   ) return false\n    if (filters.JSONLink     &&  e.JSONLink        !== filters.JSONLink    ) return false\n\n    /* alertKeeper: treat it as a comma‑separated list in the source    */\n    if (filters.alertKeeper) {\n      const keepers = e.alertKeeper\n        .split(',')\n        .map((s) => s.trim().toLowerCase())\n      if (!keepers.includes(filters.alertKeeper.toLowerCase())) return false\n    }\n\n    return true\n  })\n\n  return rows\n}\n"],"names":[],"mappings":"AAAA;;8EAE8E;;;AAqB9E;;8EAE8E,GAC9E,MAAM,KAAK,CAAC,GAAY,IACtB,MAAM,aAAa,MAAM,YAAY,EAAE,WAAW,OAAO,EAAE,WAAW,KAAK;AActE,eAAe,kBACpB,UAA8B,CAAC,CAAC;IAEhC,sEAAsE,GACtE,uEAAuE,GACvE,sEAAsE,GACtE,MAAM,SAAS,IAAI;IACnB,IAAI,QAAQ,IAAI,EAAU,OAAO,MAAM,CAAC,QAAgB,QAAQ,IAAI;IACpE,IAAI,QAAQ,OAAO,EAAO,OAAO,MAAM,CAAC,WAAgB,QAAQ,OAAO;IACvE,IAAI,QAAQ,YAAY,EAAE,OAAO,MAAM,CAAC,gBAAgB,QAAQ,YAAY;IAC5E,IAAI,QAAQ,OAAO,EAAO,OAAO,MAAM,CAAC,WAAgB,QAAQ,OAAO;IACvE,IAAI,QAAQ,SAAS,EAAK,OAAO,MAAM,CAAC,aAAgB,QAAQ,SAAS;IACzE,IAAI,QAAQ,QAAQ,EAAM,OAAO,MAAM,CAAC,YAAgB,QAAQ,QAAQ;IACxE,IAAI,QAAQ,WAAW,EAAG,OAAO,MAAM,CAAC,eAAgB,QAAQ,WAAW;IAE3E,sEAAsE,GACtE,uEAAuE,GACvE,sEAAsE,GACtE,MAAM,MAAM,MAAM,MAAM,CAAC,mBAAmB,EAAE,OAAO,QAAQ,IAAI,EAAE;QACjE,aAAa;IACf;IAEA,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,IAAI,MAAM,CAAC,+BAA+B,EAAE,IAAI,MAAM,CAAC,CAAC,EAAE,IAAI,UAAU,EAAE;IAClF;IAEA,MAAM,UAAmB,MAAM,IAAI,IAAI;IAEvC,sEAAsE,GACtE,uEAAuE,GACvE,sEAAsE,GACtE,MAAM,OAAO,QAAQ,MAAM,CAAC,CAAC;QAC3B,IAAI,QAAQ,IAAI,IAAY,CAAC,GAAG,EAAE,IAAI,EAAW,QAAQ,IAAI,GAAW,OAAO;QAC/E,IAAI,QAAQ,OAAO,IAAU,EAAE,OAAO,KAAa,QAAQ,OAAO,EAAO,OAAO;QAChF,IAAI,QAAQ,YAAY,IAAI,CAAC,GAAG,EAAE,YAAY,EAAE,QAAQ,YAAY,GAAG,OAAO;QAC9E,IAAI,QAAQ,OAAO,IAAS,CAAC,GAAG,EAAE,OAAO,EAAO,QAAQ,OAAO,GAAQ,OAAO;QAC9E,IAAI,QAAQ,SAAS,IAAQ,EAAE,SAAS,KAAW,QAAQ,SAAS,EAAK,OAAO;QAChF,IAAI,QAAQ,QAAQ,IAAS,EAAE,QAAQ,KAAY,QAAQ,QAAQ,EAAM,OAAO;QAEhF,oEAAoE,GACpE,IAAI,QAAQ,WAAW,EAAE;YACvB,MAAM,UAAU,EAAE,WAAW,CAC1B,KAAK,CAAC,KACN,GAAG,CAAC,CAAC,IAAM,EAAE,IAAI,GAAG,WAAW;YAClC,IAAI,CAAC,QAAQ,QAAQ,CAAC,QAAQ,WAAW,CAAC,WAAW,KAAK,OAAO;QACnE;QAEA,OAAO;IACT;IAEA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 447, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/fe/octave-drift-detection/src/app/mode2/page.tsx"],"sourcesContent":["\"use client\"\nimport type React from \"react\"\nimport { useState, useEffect, useMemo, useRef, useCallback } from \"react\"\nimport ReactMarkdown from \"react-markdown\"\nimport { Chart, registerables } from \"chart.js\"\nimport DriftWarningChart from \"./DriftWarningChart\"\nimport { AlertCircle, AlertTriangle, CheckCircle, RefreshCw, Info, X } from \"lucide-react\"\nimport { useSearchParams } from \"next/navigation\"\nimport {\n  fetchData,\n  type KPI,\n  type PlotDataPoint,\n  type TableDataPoint,\n  type OutletsExceedingThreshold,\n  type Indices,\n  type AllOutlets,\n  type Top10Id,\n} from \"../../services/backendService1\"\nimport { fetchEntriesTable } from \"../../services/dashboardService\"\n\nChart.register(...registerables)\n\n// Define the entry table interface\ninterface EntryTableItem {\n  BusinessUnit: string\n  useCase: string\n  ShortCode: string\n  Runtime: string\n  alertKeeper: string\n}\n\n// Error percentage ranges for the bar chart\nconst ERROR_RANGES = [\n  { min: 0, max: 10, label: \"0-10%\" },\n  { min: 10, max: 20, label: \"10-20%\" },\n  { min: 20, max: 30, label: \"20-30%\" },\n  { min: 30, max: 40, label: \"30-40%\" },\n  { min: 40, max: 50, label: \"40-50%\" },\n  { min: 50, max: 60, label: \"50-60%\" },\n  { min: 60, max: 70, label: \"60-70%\" },\n  { min: 70, max: 80, label: \"70-80%\" },\n  { min: 80, max: 90, label: \"80-90%\" },\n  { min: 90, max: 100, label: \"90-100%\" },\n  { min: 100, max: Number.POSITIVE_INFINITY, label: \">100%\" },\n]\n\nexport default function Mode2Page(): React.ReactElement {\n  const searchParams = useSearchParams()\n  const businessUnitParam = searchParams.get(\"businessUnit\") || \"\"\n  const useCaseParam = searchParams.get(\"useCase\") || \"\"\n\n  // --- STATE HOOKS ---\n  const [kpis, setKpis] = useState<KPI[]>([])\n  const [errorData, setErrorData] = useState<{ plotData: PlotDataPoint[]; tableData: TableDataPoint[] }>({\n    plotData: [],\n    tableData: [],\n  })\n  const [outletsExceedingThreshold, setOutletsExceedingThreshold] = useState<OutletsExceedingThreshold[]>([])\n  const [indices, setIndices] = useState<Indices>({ normal: [], warning: [], drift: [] })\n  const [currentPeriod, setCurrentPeriod] = useState<string>(\"N/A\")\n  const [outletsExceedingThresholdCount, setOutletsExceedingThresholdCount] = useState<number>(0)\n  const [xaiExplanation, setXaiExplanation] = useState<string>(\"\")\n  const [loading, setLoading] = useState<boolean>(true)\n  const [backendError, setBackendError] = useState<string | null>(null)\n  const [errorPercentageThreshold, setErrorPercentageThreshold] = useState<number>(0)\n  const [sortedPeriods, setSortedPeriods] = useState<string[]>([])\n  const [driftDetected, setDriftDetected] = useState<boolean | null>(null)\n  const [top10Ids, setTop10Ids] = useState<Top10Id[]>([])\n  const [totalOutlets, setTotalOutlets] = useState<number>(0)\n\n  // --- FILTER STATES for Dashboard ---\n  const [businessUnit, setBusinessUnit] = useState<string>(\"\")\n  const [useCase, setUseCase] = useState<string>(\"\")\n  const [shortCode, setShortCode] = useState<string>(\"\")\n  const [alertKeeperValue, setAlertKeeperValue] = useState<string>(\"\")\n\n  // Entries state (fetched via dashboardService)\n  const [entries, setEntries] = useState<EntryTableItem[]>([])\n  const [runtimeValue, setRuntimeValue] = useState<string>(\"\")\n  const [runtimeOptions, setRuntimeOptions] = useState<string[]>([])\n\n  // Status distribution for pie chart\n  const [statusDistribution, setStatusDistribution] = useState({ good: 65, warning: 25, error: 10 })\n\n  // Error range data for bar chart\n  const [allOutlets, setAllOutlets] = useState<AllOutlets[]>([])\n  const [errorRangeData, setErrorRangeData] = useState<{ range: string; count: number; outlets: AllOutlets[] }[]>([])\n  const [selectedRange, setSelectedRange] = useState<string | null>(null)\n  const [selectedRangeOutlets, setSelectedRangeOutlets] = useState<AllOutlets[]>([])\n\n  // Chart refs\n  const pieChartRef = useRef<Chart | null>(null)\n  const errorRangeChartRef = useRef<Chart | null>(null)\n\n  // Memoized chart colors\n  const chartColors = useMemo(() => {\n    return {\n      good: \"rgba(52,211,153,0.8)\",\n      warning: \"rgba(251,191,36,0.8)\",\n      error: \"rgba(239,68,68,0.8)\",\n      goodBorder: \"rgba(52,211,153,1)\",\n      warningBorder: \"rgba(251,191,36,1)\",\n      errorBorder: \"rgba(239,68,68,1)\",\n      barColors: [\n        \"rgba(52,211,153,0.8)\",\n        \"rgba(96,165,250,0.8)\",\n        \"rgba(234,179,8,0.8)\",\n        \"rgba(251,191,36,0.8)\",\n        \"rgba(251,146,60,0.8)\",\n        \"rgba(249,115,22,0.8)\",\n        \"rgba(236,72,153,0.8)\",\n        \"rgba(244,114,182,0.8)\",\n        \"rgba(248,113,113,0.8)\",\n        \"rgba(244,63,94,0.8)\",\n        \"rgba(239,68,68,0.8)\",\n      ],\n    }\n  }, [])\n\n  // Memoized status helpers\n  const getStatusIcon = useCallback((s?: string) => {\n    if (!s) return <Info className=\"h-5 w-5 text-gray-400\" />\n    return s.toLowerCase() === \"warning\" ? (\n      <AlertTriangle className=\"h-5 w-5 text-amber-400\" />\n    ) : s.toLowerCase() === \"error\" || s.toLowerCase() === \"alert\" ? (\n      <AlertCircle className=\"h-5 w-5 text-rose-500\" />\n    ) : (\n      <CheckCircle className=\"h-5 w-5 text-emerald-400\" />\n    )\n  }, [])\n\n  const getStatusColor = useCallback((s?: string) => {\n    if (!s) return \"text-gray-400\"\n    return s.toLowerCase() === \"warning\"\n      ? \"text-amber-400\"\n      : s.toLowerCase() === \"error\" || s.toLowerCase() === \"alert\"\n        ? \"text-rose-500\"\n        : \"text-emerald-400\"\n  }, [])\n\n  // Calculate error range data\n  const calculateErrorRangeData = useCallback((outlets: AllOutlets[]) => {\n    if (!outlets?.length) return []\n\n    return ERROR_RANGES.map((r) => {\n      const outs: AllOutlets[] = outlets.filter(\n        (o: AllOutlets) => o.percentage_error >= r.min && o.percentage_error < r.max,\n      )\n      return { range: r.label, count: outs.length, outlets: outs }\n    })\n  }, [])\n\n  // 1) Fetch entries when businessUnitParam or useCaseParam change\n  useEffect(() => {\n    if (!businessUnitParam || !useCaseParam) return\n\n    const loadEntries = async () => {\n      try {\n        const fetched = await fetchEntriesTable({\n          BusinessUnit: businessUnitParam,\n          useCase: useCaseParam,\n        })\n        // Filter out any placeholder rows\n        const filtered = fetched.filter(\n          (entry) =>\n            entry.BusinessUnit !== \"Not Selected\" &&\n            entry.useCase !== \"Not Selected\" &&\n            entry.ShortCode !== \"Not Available\",\n        )\n        setEntries(filtered)\n\n        if (filtered.length === 0) {\n          setBusinessUnit(\"Not Selected\")\n          setUseCase(\"Not Selected\")\n          setShortCode(\"Not Available\")\n          setRuntimeOptions([])\n          setAlertKeeperValue(\"Not Selected\")\n          setRuntimeValue(\"\")\n        } else {\n          // Initialize with first entry\n          setBusinessUnit(filtered[0].BusinessUnit)\n          setUseCase(filtered[0].useCase)\n          setShortCode(filtered[0].ShortCode)\n\n          const uniqueRuntimes = Array.from(new Set(filtered.map((e) => e.Runtime)))\n          setRuntimeOptions(uniqueRuntimes)\n          setRuntimeValue(uniqueRuntimes[0])\n\n          const initialKeeper = filtered.find((e) => e.Runtime === uniqueRuntimes[0])?.alertKeeper || \"\"\n          setAlertKeeperValue(initialKeeper)\n        }\n      } catch (err) {\n        console.error(err)\n        setBackendError(err instanceof Error ? err.message : \"Failed to load entries\")\n      }\n    }\n\n    loadEntries()\n  }, [businessUnitParam, useCaseParam])\n\n  // 2) Update alertKeeper when runtimeValue or entries change\n  useEffect(() => {\n    if (!runtimeValue) return\n\n    const matched = entries.find((e) => e.Runtime === runtimeValue)\n    setAlertKeeperValue(matched?.alertKeeper || \"Not Selected\")\n  }, [runtimeValue, entries])\n\n  // Fetch & prepare all data\n  const fetchAllData = useCallback(async (): Promise<void> => {\n    setLoading(true)\n    setBackendError(null)\n    try {\n      const data = await fetchData({ runtime: runtimeValue })\n\n      // Build the \"drift & warning over time\" plotData from indices\n      const driftPlot: PlotDataPoint[] = []\n      data.indices.normal.forEach((x) => driftPlot.push({ x, y: 0, exceedsThreshold: false }))\n      data.indices.warning.forEach((x) => driftPlot.push({ x, y: 1, exceedsThreshold: false }))\n      data.indices.drift.forEach((x) => driftPlot.push({ x, y: 2, exceedsThreshold: false }))\n      driftPlot.sort((a, b) => a.x - b.x)\n\n      // Dynamic data\n      setKpis(\n        data.kpis.filter((k) =>\n          [\"kstest\", \"wasserstein\", \"mseref\", \"msecurrent\"].includes(k.rowKey.toLowerCase()) ? false : true,\n        ),\n      )\n      setErrorData({ plotData: driftPlot, tableData: data.errors.tableData })\n      setOutletsExceedingThreshold(data.outletsExceedingThreshold)\n      setIndices(data.indices)\n      setCurrentPeriod(data.currentPeriod)\n      setOutletsExceedingThresholdCount(data.outletsExceedingThresholdCount)\n      setXaiExplanation(data.xaiExplanation)\n      setErrorPercentageThreshold(data.error_percentage_threshold ?? 0)\n      setAllOutlets(data.all_outlets || [])\n      setSortedPeriods(data.sorted_periods || [])\n      setDriftDetected(data.driftDetected || null)\n      setTop10Ids(data.top10Ids || [])\n      setTotalOutlets(data.totalOutlets || 0)\n\n      // Status distribution\n      const normalCount = data.indices.normal.length\n      const warningCount = data.indices.warning.length\n      const driftCount = data.indices.drift.length\n      const total = normalCount + warningCount + driftCount || 1\n      setStatusDistribution({\n        good: Math.round((normalCount / total) * 100),\n        warning: Math.round((warningCount / total) * 100),\n        error: Math.round((driftCount / total) * 100),\n      })\n\n      // Error‐range bar chart data\n      if (data.all_outlets?.length) {\n        setErrorRangeData(calculateErrorRangeData(data.all_outlets))\n      }\n    } catch (err) {\n      console.error(err)\n      setBackendError(err instanceof Error ? err.message : \"Unknown error\")\n    } finally {\n      setLoading(false)\n    }\n  }, [calculateErrorRangeData, runtimeValue])\n\n  // 3) Fetch dynamic data when runtimeValue changes\n  useEffect(() => {\n    if (runtimeValue) {\n      fetchAllData()\n    }\n  }, [runtimeValue, fetchAllData])\n\n  // Cleanup function to destroy charts when component unmounts\n  useEffect(() => {\n    return () => {\n      if (pieChartRef.current) {\n        pieChartRef.current.destroy()\n      }\n      if (errorRangeChartRef.current) {\n        errorRangeChartRef.current.destroy()\n      }\n    }\n  }, [])\n\n  // Re-draw charts any time data changes\n  useEffect(() => {\n    if (!loading) {\n      renderPieChart()\n      renderErrorRangeChart()\n    }\n  }, [loading, statusDistribution, errorRangeData, chartColors])\n\n  // Pie chart\n  const renderPieChart = useCallback(() => {\n    const ctx = document.getElementById(\"statusPieChart\") as HTMLCanvasElement\n    if (!ctx) return\n\n    // Properly destroy existing chart to prevent memory leaks\n    if (pieChartRef.current) {\n      pieChartRef.current.destroy()\n    }\n\n    // Memoize chart data\n    const chartData = {\n      labels: [\"Good\", \"Warning\", \"Error\"],\n      datasets: [\n        {\n          data: [statusDistribution.good, statusDistribution.warning, statusDistribution.error],\n          backgroundColor: [chartColors.good, chartColors.warning, chartColors.error],\n          borderColor: [chartColors.goodBorder, chartColors.warningBorder, chartColors.errorBorder],\n          borderWidth: 1,\n        },\n      ],\n    }\n\n    pieChartRef.current = new Chart(ctx, {\n      type: \"pie\",\n      data: chartData,\n      options: {\n        responsive: true,\n        maintainAspectRatio: false,\n        plugins: {\n          legend: {\n            position: \"right\",\n            labels: {\n              color: \"#e5e7eb\",\n              font: { size: 14 },\n              generateLabels: (chart) =>\n                chart.data.labels!.map((l, i) => ({\n                  text: `${l}: ${chart.data.datasets![0].data[i]}%`,\n                  fillStyle: chart.data.datasets![0].backgroundColor![i] as string,\n                  strokeStyle: chart.data.datasets![0].borderColor![i] as string,\n                  lineWidth: 1,\n                  hidden: false,\n                  index: i,\n                })),\n            },\n          },\n          tooltip: {\n            callbacks: {\n              label: (ctx) => `${ctx.label}: ${ctx.raw}%`,\n            },\n          },\n        },\n      },\n    })\n  }, [statusDistribution, chartColors])\n\n  // Bar chart\n  const renderErrorRangeChart = useCallback(() => {\n    const ctx = document.getElementById(\"errorRangeChart\") as HTMLCanvasElement\n    if (!ctx) return\n\n    // Properly destroy existing chart to prevent memory leaks\n    if (errorRangeChartRef.current) {\n      errorRangeChartRef.current.destroy()\n    }\n\n    // Get colors based on data length\n    const colors = chartColors.barColors.slice(0, errorRangeData.length)\n    const borders = colors.map((c) => c.replace(/0\\.8/, \"1\"))\n\n    // Memoize chart data\n    const chartData = {\n      labels: errorRangeData.map((d) => d.range),\n      datasets: [\n        {\n          label: \"Number of IDs\",\n          data: errorRangeData.map((d) => d.count),\n          backgroundColor: colors,\n          borderColor: borders,\n          borderWidth: 1,\n          borderRadius: 4,\n        },\n      ],\n    }\n\n    errorRangeChartRef.current = new Chart(ctx, {\n      type: \"bar\",\n      data: chartData,\n      options: {\n        responsive: true,\n        maintainAspectRatio: false,\n        plugins: {\n          title: {\n            display: true,\n            text: \"ID Distribution by Error Percentage Range\",\n            color: \"#38bdf8\",\n            font: { size: 16, weight: \"bold\" },\n          },\n          tooltip: {\n            callbacks: {\n              label: (ctx) => `IDs: ${ctx.raw}`,\n              afterLabel: () => \"Click to view details\",\n            },\n            backgroundColor: \"rgba(15,23,42,0.8)\",\n            titleColor: \"#38bdf8\",\n            bodyColor: \"#e5e7eb\",\n            borderColor: \"#1e40af\",\n            borderWidth: 1,\n            padding: 10,\n          },\n          legend: { display: false },\n        },\n        scales: {\n          x: {\n            title: { display: true, text: \"Error Percentage Range\", color: \"#38bdf8\", font: { weight: \"bold\" } },\n            ticks: { color: \"#e5e7eb\", font: { size: 12 } },\n            grid: { color: \"rgba(148,163,184,0.1)\", borderColor: \"rgba(148,163,184,0.2)\" },\n          },\n          y: {\n            title: { display: true, text: \"Number of IDs\", color: \"#38bdf8\", font: { weight: \"bold\" } },\n            beginAtZero: true,\n            ticks: { color: \"#e5e7eb\", precision: 0 },\n            grid: { color: \"rgba(148,163,184,0.1)\", borderColor: \"rgba(148,163,184,0.2)\" },\n          },\n        },\n        onClick: (_evt, elems) => {\n          if (elems.length) handleBarClick(elems[0].index)\n        },\n      },\n    })\n  }, [errorRangeData, chartColors])\n\n  // Bar‐click handler\n  const handleBarClick = useCallback(\n    (i: number) => {\n      const sel = errorRangeData[i]\n      setSelectedRange(sel.range)\n      setSelectedRangeOutlets(sel.outlets.sort((a, b) => b.percentage_error - a.percentage_error))\n    },\n    [errorRangeData],\n  )\n\n  // Memoize sorted table data\n  const sortedErrorTableData = useMemo(() => {\n    return (\n      errorData.tableData\n        .slice()\n        // Filter out duplicate IDs, keeping only the first occurrence\n        .filter((row, index, self) => index === self.findIndex((r) => r.id === row.id))\n        .sort((a, b) => (b.difference ?? 0) - (a.difference ?? 0))\n    )\n  }, [errorData.tableData])\n\n  // Memoize sorted threshold exceedance data\n  const sortedOutletsExceedingThreshold = useMemo(() => {\n    return outletsExceedingThreshold.slice().sort((a, b) => b.percentage_error - a.percentage_error)\n  }, [outletsExceedingThreshold])\n\n  // Memoize status KPI\n  const statusKpi = useMemo(() => {\n    return kpis.find((k) => k.rowKey === \"State\")?.value || kpis.find((k) => k.rowKey === \"status\")?.value\n  }, [kpis])\n\n  // Memoize additional metrics\n  const additionalMetrics = useMemo(() => {\n    return {\n      avgPercentageError: kpis.find((k) => k.rowKey === \"Average Percentage Error (All)\")?.value || \"N/A\",\n      avgPercentageErrorExceeding:\n        kpis.find((k) => k.rowKey === \"Average Percentage Error (Exceeding)\")?.value || \"N/A\",\n      totalOutlets: kpis.find((k) => k.rowKey === \"Total Outlets\")?.value || totalOutlets.toString(),\n      outletsExceedingThreshold:\n        kpis.find((k) => k.rowKey === \"Outlets Exceeding Threshold\")?.value ||\n        outletsExceedingThresholdCount.toString(),\n    }\n  }, [kpis, totalOutlets, outletsExceedingThresholdCount])\n\n  return (\n    <div className=\"bg-gradient-to-b from-gray-950 to-gray-900 min-h-screen flex flex-col\">\n      <title>Mode 2 | Business Dashboard</title>\n      <main className=\"flex-grow container mx-auto px-4 py-8\">\n        {/* Backend Error */}\n        {backendError && (\n          <div className=\"bg-rose-950/40 border border-rose-800/60 rounded-lg p-4 mb-6 backdrop-blur-sm shadow-lg\">\n            <div className=\"flex items-center\">\n              <AlertCircle className=\"h-5 w-5 text-rose-400 mr-2\" />\n              <h3 className=\"text-lg font-medium text-rose-300\">Backend Error</h3>\n            </div>\n            <p className=\"mt-2 text-rose-200\">{backendError}</p>\n            <button\n              onClick={fetchAllData}\n              className=\"mt-3 px-4 py-2 bg-rose-800/50 hover:bg-rose-700/70 text-white rounded-md text-sm flex items-center gap-2\"\n            >\n              <RefreshCw className=\"h-4 w-4\" /> Retry\n            </button>\n          </div>\n        )}\n\n        {/* Header */}\n        <div className=\"flex flex-col md:flex-row md:items-center md:justify-between mb-6\">\n          <h2 className=\"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-sky-600 mb-2\">\n            OCTAVE – RG Dashboard\n          </h2>\n          <div className=\"flex flex-col sm:flex-row sm:items-center gap-4\">\n            <p className=\"text-sky-300 flex items-center gap-2\">\n              <span className=\"inline-block h-2 w-2 rounded-full bg-sky-400 animate-pulse\" />\n              Current Period: {loading ? \"Loading…\" : currentPeriod}\n            </p>\n            {driftDetected !== null && (\n              <div\n                className={`flex items-center gap-2 sm:ml-6 px-3 py-1.5 rounded-md ${driftDetected ? \"bg-rose-900/40 border border-rose-700\" : \"bg-emerald-900/40 border border-emerald-700\"}`}\n              >\n                <span className=\"font-medium text-gray-200\">Drift Detected:</span>\n                <span className={`font-bold ${driftDetected ? \"text-rose-400\" : \"text-emerald-400\"}`}>\n                  {driftDetected ? \"Yes\" : \"No\"}\n                </span>\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Static Filters & Runtime */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6\">\n          {/* Filters (2/3) */}\n          <div className=\"lg:col-span-2 bg-gradient-to-br from-sky-950/40 to-sky-900/20 p-6 rounded-lg border border-sky-800/30 shadow-md\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div>\n                <p className=\"text-lg font-medium text-sky-300\">Business Unit:</p>\n                <p className=\"text-sky-200\">{loading ? \"Loading…\" : businessUnit || \"Not Selected\"}</p>\n                <p className=\"mt-4 text-lg font-medium text-sky-300\">Use Case:</p>\n                <p className=\"text-sky-200\">{loading ? \"Loading…\" : useCase || \"Not Selected\"}</p>\n              </div>\n              <div>\n                <p className=\"text-lg font-medium text-sky-300\">Short Code:</p>\n                <p className=\"text-sky-200\">{loading ? \"Loading…\" : shortCode || \"Not Available\"}</p>\n                <p className=\"mt-4 text-lg font-medium text-sky-300\">Alert Keeper:</p>\n                <p className=\"text-sky-200\">{loading ? \"Loading…\" : alertKeeperValue || \"Not Selected\"}</p>\n              </div>\n            </div>\n          </div>\n\n          {/* Runtime (1/3) */}\n          <div className=\"bg-gradient-to-br from-sky-950/40 to-sky-900/20 p-6 rounded-lg border border-sky-800/30 shadow-md\">\n            <h3 className=\"text-lg font-medium text-sky-300 mb-2\">Runtime</h3>\n            <select\n              className=\"w-full bg-gray-800/80 border border-sky-700/50 rounded-md p-2 text-white focus:ring-2 focus:ring-sky-500\"\n              value={runtimeValue}\n              onChange={(e) => setRuntimeValue(e.target.value)}\n              disabled={runtimeOptions.length === 0}\n            >\n              {runtimeOptions.length === 0 ? (\n                <option value=\"\">No runtimes available</option>\n              ) : (\n                runtimeOptions.map((runtime) => (\n                  <option key={runtime} value={runtime}>\n                    {runtime}\n                  </option>\n                ))\n              )}\n            </select>\n          </div>\n        </div>\n\n        {/* Plot & Pie */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6\">\n          {/* Drift & Warning Over Time */}\n          <div className=\"lg:col-span-2 bg-gray-900/80 rounded-xl shadow-xl overflow-hidden p-6 border border-gray-700/50 backdrop-blur-sm\">\n            <h2 className=\"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-sky-600 mb-4\">\n              Drift & Warning Over Time\n            </h2>\n            <div className=\"h-80 bg-gray-800/60 rounded-lg p-4 border border-gray-700/50\">\n              {loading ? (\n                <div className=\"flex items-center justify-center h-full\">\n                  <svg\n                    className=\"animate-spin h-8 w-8 text-sky-500\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    fill=\"none\"\n                    viewBox=\"0 0 24 24\"\n                  >\n                    <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" />\n                    <path\n                      className=\"opacity-75\"\n                      fill=\"currentColor\"\n                      d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                    />\n                  </svg>\n                </div>\n              ) : (\n                <DriftWarningChart plotData={errorData.plotData} />\n              )}\n            </div>\n          </div>\n\n          {/* Status Distribution */}\n          <div className=\"bg-gradient-to-br from-sky-950/40 to-sky-900/20 p-6 rounded-lg border border-sky-800/30 shadow-md\">\n            <h3 className=\"text-lg font-medium text-sky-300 mb-2\">Status Distribution</h3>\n            <div className=\"h-80\">\n              <canvas id=\"statusPieChart\"></canvas>\n            </div>\n          </div>\n        </div>\n\n        {/* KPIs */}\n        <div className=\"bg-gray-900/80 rounded-xl shadow-xl overflow-hidden p-6 mb-6 border border-gray-700/50 backdrop-blur-sm\">\n          <h2 className=\"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-sky-600 mb-4\">\n            Key Performance Indicators\n          </h2>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            {/* Status */}\n            <div className=\"bg-gradient-to-br from-sky-950/40 to-sky-900/20 p-4 rounded-lg border border-sky-800/30 shadow-md hover:shadow-sky-900/20 hover:border-sky-700/50 transition-all\">\n              <h3 className=\"text-lg font-medium text-sky-300 mb-2\">Status</h3>\n              <div className=\"flex items-center\">\n                <div className=\"w-10 h-10 rounded-full bg-sky-800/40 flex items-center justify-center mr-3\">\n                  {getStatusIcon(statusKpi)}\n                </div>\n                <p className={`text-xl font-semibold ${getStatusColor(statusKpi)}`}>\n                  {loading ? \"Loading...\" : statusKpi || \"N/A\"}\n                </p>\n              </div>\n              <div className=\"mt-4 grid grid-cols-2 gap-4\">\n                <div>\n                  <p className=\"text-sm text-gray-400\">Total Outlets</p>\n                  <p className=\"text-lg font-medium text-white\">{additionalMetrics.totalOutlets}</p>\n                </div>\n                <div>\n                  <p className=\"text-sm text-gray-400\">Outlets Exceeding</p>\n                  <p className=\"text-lg font-medium text-white\">{additionalMetrics.outletsExceedingThreshold}</p>\n                </div>\n              </div>\n            </div>\n            {/* Additional Metrics */}\n            <div className=\"bg-gradient-to-br from-sky-950/40 to-sky-900/20 p-4 rounded-lg border border-sky-800/30 shadow-md hover:shadow-sky-900/20 hover:border-sky-700/50 transition-all\">\n              <h3 className=\"text-lg font-medium text-sky-300 mb-2\">Error Metrics</h3>\n              <div className=\"space-y-4\">\n                <div>\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm text-gray-400\">Error % Threshold:</span>\n                    <span className=\"text-sm font-medium text-white\">\n                      {loading ? \"Loading...\" : errorPercentageThreshold.toFixed(2)}\n                    </span>\n                  </div>\n                </div>\n                <div className=\"pt-3 border-t border-sky-800/30\">\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm text-gray-400\">Avg % Error (All):</span>\n                    <span className=\"text-sm font-medium text-white\">\n                      {loading ? \"Loading...\" : additionalMetrics.avgPercentageError}\n                    </span>\n                  </div>\n                </div>\n                <div className=\"pt-3 border-t border-sky-800/30\">\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm text-gray-400\">Avg % Error (Exceed):</span>\n                    <span className=\"text-sm font-medium text-white\">\n                      {loading ? \"Loading...\" : additionalMetrics.avgPercentageErrorExceeding}\n                    </span>\n                  </div>\n                </div>\n                <div className=\"pt-3 border-t border-sky-800/30\">\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm text-gray-400\">Drift Detected:</span>\n                    <span className={`text-sm font-medium ${driftDetected ? \"text-rose-400\" : \"text-emerald-400\"}`}>\n                      {loading ? \"Loading...\" : driftDetected ? \"Yes\" : \"No\"}\n                    </span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Error Comparison & Threshold Exceedances */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6\">\n          {/* Error Comparison */}\n          <div className=\"bg-gray-900/80 rounded-xl shadow-xl overflow-hidden p-6 border border-gray-700/50 backdrop-blur-sm\">\n            <h2 className=\"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-sky-600 mb-4\">\n              Error Comparison (Current Period)\n            </h2>\n            {loading ? (\n              <div className=\"flex items-center justify-center py-12\">\n                <svg\n                  className=\"animate-spin h-8 w-8 text-sky-500 mb-2\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  fill=\"none\"\n                  viewBox=\"0 0 24 24\"\n                >\n                  <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" />\n                  <path\n                    className=\"opacity-75\"\n                    fill=\"currentColor\"\n                    d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                  />\n                </svg>\n                <span className=\"text-sky-300\">Loading error data...</span>\n              </div>\n            ) : (\n              <div className=\"max-h-96 overflow-y-auto rounded-lg border border-gray-700/50\">\n                <table className=\"min-w-full divide-y divide-gray-700/50\">\n                  <thead className=\"bg-gray-800/60\">\n                    <tr>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-sky-300 uppercase tracking-wider\">\n                        NO.\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-sky-300 uppercase tracking-wider\">\n                        ID\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-sky-300 uppercase tracking-wider\">\n                        Current Error\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-sky-300 uppercase tracking-wider\">\n                        Reference Error\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-sky-300 uppercase tracking-wider\">\n                        Difference\n                      </th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"bg-gray-800/30 divide-y divide-gray-700/50\">\n                    {sortedErrorTableData.map((row, i) => (\n                      <tr key={row.id} className=\"hover:bg-gray-700/30 transition-colors duration-150\">\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-white\">{i + 1}</td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-white\">{row.id}</td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-sky-400 font-medium\">\n                          {(row.abs_curr_per ?? row.error ?? 0).toFixed(2)}\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-sky-400 font-medium\">\n                          {(row.abs_ref_per ?? 0).toFixed(2)}\n                        </td>\n                        <td\n                          className={`px-6 py-4 whitespace-nowrap text-sm font-medium ${(row.difference ?? 0) > 0 ? \"text-rose-400\" : \"text-emerald-400\"}`}\n                        >\n                          {(row.difference ?? 0) > 0 ? \"+\" : \"\"}\n                          {(row.difference ?? 0).toFixed(2)}\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            )}\n          </div>\n\n          {/* Threshold Exceedances */}\n          <div className=\"bg-gradient-to-br from-rose-950/30 to-gray-900/90 rounded-xl shadow-xl overflow-hidden p-6 border border-rose-900/30 backdrop-blur-sm\">\n            <h2 className=\"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-rose-400 to-rose-600 mb-4\">\n              Threshold Exceedances&nbsp;\n              <span className=\"text-sm text-rose-200\">(Threshold: {errorPercentageThreshold.toFixed(2)}%)</span>\n            </h2>\n            {loading ? (\n              <div className=\"flex items-center justify-center py-12\">\n                <svg\n                  className=\"animate-spin h-8 w-8 text-rose-500 mb-2\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  fill=\"none\"\n                  viewBox=\"0 0 24 24\"\n                >\n                  <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" />\n                  <path\n                    className=\"opacity-75\"\n                    fill=\"currentColor\"\n                    d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.137 5.824 3 7.938l3-2.647z\"\n                  />\n                </svg>\n                <span className=\"text-rose-300\">Loading threshold data...</span>\n              </div>\n            ) : (\n              <div className=\"max-h-96 overflow-y-auto rounded-lg border border-rose-800/30\">\n                <table className=\"min-w-full divide-y divide-rose-800/30\">\n                  <thead className=\"bg-rose-900/20\">\n                    <tr>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-rose-300 uppercase tracking-wider\">\n                        ID\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-rose-300 uppercase tracking-wider\">\n                        True Value\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-rose-300 uppercase tracking-wider\">\n                        Predicted Value\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-rose-300 uppercase tracking-wider\">\n                        % Error\n                      </th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"bg-rose-900/10 divide-y divide-rose-800/30\">\n                    {sortedOutletsExceedingThreshold.map((outlet) => (\n                      <tr key={outlet.id} className=\"hover:bg-rose-900/20 transition-colors duration-150\">\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-white\">{outlet.id}</td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-300\">\n                          {outlet.y_true.toFixed(2)}\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-300\">\n                          {outlet.y_pred.toFixed(2)}\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-rose-400 font-medium\">\n                          {outlet.percentage_error.toFixed(2)}%\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Error Range Distribution Bar Chart */}\n        <div className=\"bg-gray-900/80 rounded-xl shadow-xl overflow-hidden p-6 mb-6 border border-gray-700/50 backdrop-blur-sm\">\n          <h2 className=\"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-sky-600 mb-4\">\n            ID Distribution by Error Percentage Range\n          </h2>\n          <div className=\"h-80 bg-gray-800/60 rounded-lg p-4 border border-gray-700/50 mb-4\">\n            {loading ? (\n              <div className=\"flex items-center justify-center h-full\">\n                <svg\n                  className=\"animate-spin h-8 w-8 text-sky-500 mb-2\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  fill=\"none\"\n                  viewBox=\"0 0 24 24\"\n                >\n                  <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" />\n                  <path\n                    className=\"opacity-75\"\n                    fill=\"currentColor\"\n                    d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                  />\n                </svg>\n                <span className=\"text-sky-300\">Loading chart data...</span>\n              </div>\n            ) : (\n              <canvas id=\"errorRangeChart\"></canvas>\n            )}\n          </div>\n\n          {/* Selected Range Table */}\n          {selectedRange && (\n            <div className=\"mt-4\">\n              <h3 className=\"text-xl font-medium text-sky-300 mb-3\">\n                IDs in {selectedRange} Error Range\n                <button onClick={() => setSelectedRange(null)} className=\"ml-2 text-sky-400 hover:text-sky-300\">\n                  <X className=\"h-4 w-4 inline\" />\n                </button>\n              </h3>\n              {selectedRangeOutlets.length === 0 ? (\n                <p className=\"text-gray-400\">No IDs in this range</p>\n              ) : (\n                <div className=\"max-h-96 overflow-y-auto rounded-lg border border-sky-800/30\">\n                  <table className=\"min-w-full divide-y divide-sky-800/30\">\n                    <thead className=\"bg-sky-900/20\">\n                      <tr>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-sky-300 uppercase tracking-wider\">\n                          ID\n                        </th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-sky-300 uppercase tracking-wider\">\n                          True Value\n                        </th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-sky-300 uppercase tracking-wider\">\n                          Predicted Value\n                        </th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-sky-300 uppercase tracking-wider\">\n                          % Error\n                        </th>\n                      </tr>\n                    </thead>\n                    <tbody className=\"bg-sky-900/10 divide-y divide-sky-800/30\">\n                      {selectedRangeOutlets.map((o) => (\n                        <tr key={o.id} className=\"hover:bg-sky-900/20 transition-colors duration-150\">\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-white\">{o.id}</td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-300\">{o.y_true.toFixed(2)}</td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-300\">{o.y_pred.toFixed(2)}</td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-sky-400 font-medium\">\n                            {o.percentage_error.toFixed(2)}%\n                          </td>\n                        </tr>\n                      ))}\n                    </tbody>\n                  </table>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n\n        {/* XAI Result */}\n        <div className=\"bg-gray-900/80 rounded-xl shadow-xl overflow-hidden p-6 mb-6 border border-gray-700/50 backdrop-blur-sm\">\n          <h2 className=\"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-sky-600 mb-4\">\n            XAI Result\n          </h2>\n          <div className=\"bg-gray-800/60 rounded-lg p-6 border border-gray-700/50\">\n            {loading ? (\n              <div className=\"flex items-center justify-center py-8\">\n                <svg\n                  className=\"animate-spin h-8 w-8 text-sky-500 mb-2\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  fill=\"none\"\n                  viewBox=\"0 0 24 24\"\n                >\n                  <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" />\n                  <path\n                    className=\"opacity-75\"\n                    fill=\"currentColor\"\n                    d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                  />\n                </svg>\n                <span className=\"text-sky-300\">Loading XAI explanation...</span>\n              </div>\n            ) : (\n              <div className=\"prose prose-invert prose-sky max-w-none\">\n                {xaiExplanation ? (\n                  <ReactMarkdown>{xaiExplanation}</ReactMarkdown>\n                ) : (\n                  <div className=\"flex items-center text-rose-400 gap-2\">\n                    <AlertCircle className=\"h-5 w-5\" />\n                    <p>No explanation available</p>\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n        </div>\n      </main>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}